import{r as t}from"./vendor.e9d19354.js";import{G as _,_ as h,a as I,j as a}from"./index.61cbec1b.js";const y="n3868xAgrFoCksxL70Ci8cf8w7VLDTQz",b="https://api.giphy.com/v1",x=async({limit:e=20,keyword:s="panda",page:i=0}={})=>{const u=`${b}/gifs/search?api_key=${y}&q=${s}&limit=${e}&offset=${i*e}&rating=g&lang=es`,n=await(await fetch(u)).json(),{data:r}=n;return r.map(c=>{const{id:o,title:g,images:l}=c,{url:p,height:m,width:S}=l.fixed_width;return{id:o,title:g,url:p,height:m,width:S}})},v={set(e,s){return window.localStorage.setItem(e,s)},get(e){return window.localStorage.getItem(e)}},w=0,A=({keyword:e}={keyword:null})=>{const[s,i]=t.exports.useState(!1),[u,d]=t.exports.useState(!1),[n,r]=t.exports.useState(w),{gifs:f,setGifs:c}=t.exports.useContext(_),o=e||v.get("lastKeyword")||"random";t.exports.useEffect(async()=>{i(!0);const l=await x({keyword:o});c(l),i(!1),v.set("lastKeyword",e)},[e,o,c]),t.exports.useEffect(async()=>{if(n===w)return;d(!0);const l=await x({keyword:o,page:n});c(p=>p.concat(l)),d(!1)},[o,n]);const g=Object.entries(f).length===0;return{loading:s,loadingNextPage:u,gifs:f,setPage:r,noResultsFound:g}},G=({distance:e="60px",externalRef:s,once:i=!0}={})=>{const[u,d]=t.exports.useState(!1),n=t.exports.useRef();return t.exports.useEffect(()=>{let r;const f=s?s.current:n.current,c=(o,g)=>{o[0].isIntersecting?(d(!0),i&&g.disconnect()):!i&&d(!1)};return(()=>{typeof IntersectionObserver!="undefined"||h(()=>import("./intersection-observer.aa907d4a.js"),[]),r=new IntersectionObserver(c,{rootMargin:e}),f&&r.observe(f)})(),()=>r&&r.disconnect()}),{isNearScreen:u,fromRef:n}};const L=()=>I("div",{className:"lds-roller",children:[a("div",{}),a("div",{}),a("div",{}),a("div",{}),a("div",{}),a("div",{}),a("div",{}),a("div",{})]});export{b as A,L as S,A as a,y as b,G as u};
